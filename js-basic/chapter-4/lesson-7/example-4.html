<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<script>
    /******************************************
     * Внутреннее устройство массива
     ******************************************/

    /**
     * Массив – это объект, где в качестве ключей выбраны цифры, с дополнительными методами и свойством length.
     * Так как это объект, то в функцию он передаётся по ссылке:
     */
    function eat(arr) {
        arr.pop();
    }

    var arr = ["нам", "не", "страшен", "серый", "волк"];

    alert(arr.length);
    eat(arr);
    eat(arr);
    alert(arr.length);

    /**
     * Ещё одно следствие – можно присваивать в массив любые свойства.
     * Например:
     */
    var fruits = [];
    fruits[99999] = 5;
    fruits.age = 25;

    /**
     * … Но массивы для того и придуманы в JavaScript, чтобы удобно работать именно с упорядоченными,
     * нумерованными данными. Для этого в них существуют специальные методы и свойство length.
     * Как правило, нет причин использовать массив как обычный объект, хотя технически это и возможно.
     */

    /**
     * Вывод массива с «дырами»
     * Если в массиве есть пропущенные индексы, то при выводе в
     * большинстве браузеров появляются «лишние» запятые, например:
     */
    var a = [];
    a[0] = 0;
    a[5] = 5;
    alert(a); // 0,,,,,5

    /**
     * Эти запятые появляются потому, что алгоритм вывода массива идёт от 0 до arr.length
     * и выводит всё через запятую. Отсутствие значений даёт несколько запятых подряд.
     */

    /**
     * Влияние на быстродействие
     */

    /**
     * Методы push/pop выполняются быстро, а shift/unshift – медленно.
     * Чтобы понять, почему работать с концом массива – быстрее, чем с
     * его началом, разберём подробнее происходящее при операции:
     * fruits.shift(); // убрать 1 элемент с начала массива
     * При этом, так как все элементы находятся в своих ячейках, просто удалить элемент
     * с номером 0 недостаточно. Нужно еще и переместить остальные элементы на их новые индексы.
     * Операция shift должна выполнить целых три действия:
     * 1. Удалить нулевой элемент.
     * 2. Переместить все свойства влево, с индекса 1 на 0, с 2 на 1 и так далее.
     * 3. Обновить свойство length.
     * Чем больше элементов в массиве, тем дольше их перемещать, это много операций с памятью.
     * Аналогично работает unshift: чтобы добавить элемент в начало массива,
     * нужно сначала перенести вправо, в увеличенные индексы, все существующие.
     * А что же с push/pop? Им как раз перемещать ничего не надо. Для того, чтобы
     * удалить элемент, метод pop очищает ячейку и уменьшает значение length.
     * Действия при операции:
     * fruits.pop(); // убрать 1 элемент с конца
     * Перемещать при pop не требуется, так как прочие элементы после этой операции остаются на тех же индексах.
     * Аналогично работает push.
     */

</script>
</body>
</html>