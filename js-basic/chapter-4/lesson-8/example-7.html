<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<script>
    /************************************
     * Сортировка, метод sort(fn)
     ************************************/

    /**
     * Метод sort() сортирует массив на месте. Например:
     */
    var arr = [1, 2, 15];
    arr.sort();
    alert(arr);

    /**
     * Не заметили ничего странного в этом примере?
     * Порядок стал 1, 15, 2, это точно не сортировка чисел. Почему?
     * Это произошло потому, что по умолчанию sort сортирует, преобразуя элементы к строке.
     * Поэтому и порядок у них строковый, ведь "2" > "15".
     */

    /**
     * Свой порядок сортировки
     * Для указания своего порядка сортировки в метод arr.sort(fn) нужно передать
     * функцию fn от двух элементов, которая умеет сравнивать их.
     * Внутренний алгоритм функции сортировки умеет сортировать любые массивы
     * – апельсинов, яблок, пользователей, и тех и других и третьих – чего угодно.
     * Но для этого ему нужно знать, как их сравнивать. Эту роль и выполняет fn.
     * Если эту функцию не указать, то элементы сортируются как строки.
     * Например, укажем эту функцию явно, отсортируем элементы массива как числа:
     */
    function compareNumeric(a, b) {
        if (a > b) return 1;
        if (a < b) return -1;
    }
    var arr = [1, 2, 15];
    arr.sort(compareNumeric);
    alert(arr);

    /**
     * Обратите внимание, мы передаём в sort() именно саму функцию compareNumeric,
     * без вызова через скобки. Был бы ошибкой следующий код:
     * arr.sort(compareNumeric());
     * Как видно из примера выше, функция, передаваемая sort, должна иметь два аргумента.
     * Алгоритм сортировки, встроенный в JavaScript, будет передавать ей для сравнения элементы массива.
     * Она должна возвращать:
     * 1. Положительное значение, если a > b,
     * 2. Отрицательное значение, если a < b,
     * 3. Если равны – можно 0, но вообще – не важно, что возвращать,
     *    если их взаимный порядок не имеет значения.
     */

    /**
     * Алгоритм сортировки
     * В методе sort, внутри самого интерпретатора JavaScript, реализован универсальный
     * алгоритм сортировки. Как правило, это ««быстрая сортировка»», дополнительно
     * оптимизированная для небольших массивов.
     * Он решает, какие пары элементов и когда сравнивать, чтобы отсортировать побыстрее.
     * Мы даём ему функцию – способ сравнения, дальше он вызывает её сам.
     * Кстати, те значения, с которыми sort вызывает функцию сравнения,
     * можно увидеть, если вставить в неё alert:
     */
    [1, -2, 15, 2, 0, 8].sort(function (a, b) {
        alert(a + ' <> ' + b);
    });

    /**
     * Сравнение compareNumeric в одну строку
     * Функцию compareNumeric для сравнения элементов-чисел можно упростить до одной строчки.
     */
    function compareNumeric(a, b) {
        return a - b;
    }

    /**
     * Эта функция вполне подходит для sort, так как возвращает положительное число,
     * если a > b, отрицательное, если наоборот, и 0, если числа равны.
     */

</script>
</body>
</html>