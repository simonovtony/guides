<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<script>
    /******************************************
     * Экспорт значений
     ******************************************/

    /**
     * Приём «модуль» используется почти во всех современных библиотеках.
     *
     * Ведь что такое библиотека? Это полезные функции, ради которых её
     * подключают, плюс временные переменные и вспомогательные функции,
     * которые библиотека использует внутри себя.
     *
     * Посмотрим, к примеру, на библиотеку Lodash, хотя могли бы и jQuery,
     * там почти то же самое.
     *
     * Если её подключить, то появится специальная переменная lodash
     * (короткое имя _), которую можно использовать как функцию, и
     * кроме того в неё записаны различные полезные свойства, например:
     *
     * 1) _.defaults(src, dst1, dst2...) – копирует в объект src те
     *    свойства из объектов dst1, dst2 и других, которых там нет.
     * 2) _.cloneDeep(obj) – делает глубокое копирование объекта obj,
     *    создавая полностью независимый клон.
     * 3) _.size(obj) – возвращает количество свойств в объекте, полиморфная
     *    функция: можно передать массив или даже 1 значение.
     *
     * Есть и много других функций, подробнее описанных в документации.
     *
     * Пример использования:
     *
     * Здесь нам не важно, какие функции или методы библиотеки используются,
     * нас интересует именно как описана эта библиотека, как в ней
     * применяется приём «модуль».
     *
     * Вот примерная выдержка из исходного файла:

         ;(function() {

          // lodash - основная функция для библиотеки
          function lodash(value) {
            // ...
          }

          // вспомогательная переменная
          var version = '2.4.1';
          // ... другие вспомогательные переменные и функции

          // код функции size, пока что доступен только внутри
          function size(collection) {
            return Object.keys(collection).length;
          }

          // присвоим в lodash size и другие функции, которые нужно вынести из модуля
          lodash.size = size
          // lodash.defaults = ...
          // lodash.cloneDeep = ...

          // "экспортировать" lodash наружу из модуля
          window._ = lodash; // в оригинальном коде здесь сложнее, но смысл тот же

        }());

     * Внутри внешней функции:
     *
     * 1) Происходит что угодно, объявляются свои локальные переменные, функции.
     * 2) В window выносится то, что нужно снаружи.
     *
     * Технически, мы могли бы вынести в window не только lodash, но и вообще все
     * объекты и функции. На практике, как раз наоборот, всё прячут внутри модуля,
     * глобальную область во избежание конфликтов хранят максимально чистой.
     *
     * !!! Зачем точка с запятой в начале?
     *
     * В начале кода выше находится точка с запятой ; – это не опечатка, а особая
     * «защита от дураков».
     *
     * Если получится, что несколько JS-файлов объединены в один (и, скорее всего,
     * сжаты минификатором, но это не важно), и программист забыл поставить точку
     * с запятой, то будет ошибка.
     *
     * Например, первый файл a.js:
     *
     *
     */
</script>
</body>
</html>