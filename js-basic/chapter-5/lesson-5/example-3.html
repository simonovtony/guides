<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<script>
    /***********************************************
     * Порием проектирования "Модуль"
     ***********************************************/

    /**
     * Чтобы проблемы не было, всего-то нужно, чтобы у скрипта была своя собственная
     * область видимости, чтобы его переменные не попали на страницу.
     *
     * Для этого мы завернём всё его содержимое в функцию, которую тут же запустим.
     *
     * Файл hello.js, оформленный как модуль:
     *
     * Этот скрипт при подключении к той же странице будет работать корректно.
     *
     * Будет выводиться «Привет», а затем «Пожалуйста, нажмите на кнопку».
     *
     * !!! Зачем скобки вокруг функции?
     *
     * В примере выше обьявление модуля выглядит так:
     */
    (function () {
        alert( "объявляем локальные переменные, функции, работаем" );
        // ...
    })();

    /**
     * В начале и в конце стоят скобки, так как иначе была бы ошибка.
     *
     * Вот, для сравнения, неверный вариант:

        function () {
            // будет ошибка
        }();
     *
     * Ошибка при его запуске произойдет потому, что браузер, видя ключевое слово
     * function в основном потоке кода, попытается прочитать Function Declaration,
     * а здесь имени нет.
     *
     * Впрочем, даже если имя поставить, то работать тоже не будет:

        function work() {
            // ...
        }(); // syntax error
     *
     * !!! Дело в том, что «на месте» разрешено вызывать только Function Expression.
     *
     * Общее правило таково:
     * 1)   Если браузер видит function в основном потоке кода – он считает,
     *      что это Function Declaration.
     * 2)   Если же function идёт в составе более сложного выражения, то он
     *      считает, что это Function Expression.
     *
     * Для этого и нужны скобки – показать, что у нас Function Expression, который
     * по правилам JavaScript можно вызвать «на месте».
     *
     * Можно показать это другим способом, например поставив перед функцией оператор:
     */
    +function () {
        alert('Вызов на месте');
    }()
    !function () {
        alert('Так тоже будет работать');
    }()
</script>
</body>
</html>