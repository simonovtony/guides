<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<script>
    /**
     * Контекст выполнения, стек
     */
    // У каждого вызова функции есть свой «контекст выполнения» (execution context).
    // Контекст выполнения – это служебная информация, которая соответствует текущему запуску функции.
    // Она включает в себя локальные переменные функции и конкретное место в коде, на котором находится интерпретатор.
    function pow(x, n) {
        if (n != 1) { // пока n != 1 сводить вычисление pow(x,n) к pow(x,n-1)
            return x * pow(x, n - 1);
        } else {
            return x; // первая степень числа равна самому числу
        }
    }
    // При любом вложенном вызове JavaScript запоминает текущий контекст выполнения в
    // специальной внутренней структуре данных – «стеке контекстов».

    alert(pow(2, 3));
    // Контекст: { x: 2, n: 3, строка 3 } (глубина 3)
    // Контекст: { x: 2, n: 2, строка 2 } (глубина 2)
    // Контекст: { x: 2, n: 1, строка 1 } (глубина 1)
    // Возврат 1

    // Любая рекурсия может быть переделана в цикл. Как правило, вариант с циклом будет эффективнее.
    // Но переделка рекурсии в цикл может быть нетривиальной, особенно когда в функции, в зависимости от условий,
    // используются различные рекурсивные подвызовы, когда ветвление более сложное.
    function pow2(x, n) {
        var result = x;
        for (var i = 1; i < n; i++) {
            result *= x;
        }
        return result;
    }

    alert(pow2(2, 3));
</script>
</body>
</html>