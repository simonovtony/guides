<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
<script>
    function f(x) {
        return Math.random() * x;
    }

    function makeCaching(f) {
        var cache = {};
        return function (arg) {
            if (!(arg in cache)) {
                cache[arg] = f.call(this, arg);
            }
            return cache[arg];
        };
    }

    f = makeCaching(f);

    var a, b;

    a = f(1);
    b = f(1);
    alert(a == b);

    b = f(2);
    alert(a == b);
</script>
</body>
</html>