# Статические и фабричные методы

Методы и свойства, которые не привязаны к конкретному экземпляру
объекта, называют «статическими». Их записывают прямо в саму функцию-
конструктор.

## Статические свойства

В коде ниже используются статические свойства Article.count и
Article.DEFAULT_FORMAT:

`example-1.html`

Они хранят данные, специфичные не для одного объекта, а для всех
статей целиком.

Как правило, это чаще константы, такие как формат «по умолчанию»
Article.DEFAULT_FORMAT.

## Статические методы

С примерами статических методов мы уже знакомы: это встроенные методы
String.fromCharCode, Date.parse.

Создадим для Article статический метод Article.showCount():

`example-2.html`

Здесь Article.count – статическое свойство, а Article.showCount –
статический метод.

Обратим внимание на использование this в примере выше. Несмотря на то,
что переменная и метод – статические, он всё ещё полезен. В строке (1)
он равен Article.

## Пример: сравнение обьектов

Ещё один хороший способ применения – сравнение объектов.

Например, у нас есть объект Journal для журналов. Журналы можно
сравнивать – по толщине, по весу, по другим параметрам.

Объявим «стандартную» функцию сравнения, которая будет сравнивать по
дате издания. Эта функция сравнения, естественно, не привязана к
конкретному журналу, но относится к журналам вообще.

Поэтому зададим её как статический метод Journal.compare:

`example-3.html`

В примере ниже эта функция используется для поиска самого раннего
журнала из массива:

`example-4.html`

Статический метод также можно использовать для функций, которые вообще
не требуют наличия объекта.

Например, метод formatDate(date) можно сделать статическим. Он будет
форматировать дату «как это принято в журналах», при этом его можно
использовать в любом месте кода, не обязательно создавать журнал.

Например:

`example-5.html`

# Фабричные методы

Рассмотрим ситуацию, когда объект нужно создавать различными
способами. Например, это реализовано во встроенном объекте Date.
Он по-разному обрабатывает аргументы разных типов:

* new Date() – создаёт объект с текущей датой,
* new Date(milliseconds) – создаёт дату по количеству миллисекунд
milliseconds,
* new Date(year, month, day ...) – создаёт дату по компонентам год,
месяц, день…
* new Date(datestring) – читает дату из строки datestring

#### "Фабричный статический метод" – удобная альтернатива такому
#### конструктору. Так называется статический метод, который служит
#### для создания новых объектов (поэтому и называется «фабричным»).

Пример встроенного фабричного метода – String.fromCharCode(code).
Этот метод создает строку из кода символа:

`example-6.html`

Но строки – слишком простой пример, посмотрим что-нибудь посложнее.

Допустим, нам нужно создавать объекты User: анонимные new User() и
с данными new User({name: 'Вася', age: 25}).

Можно, конечно, создать полиморфную функцию-конструктор User:

`example-7.html`

Подход с использованием фабричных методов был бы другим. Вместо
разбора параметров в конструкторе – делаем два метода:
User.createAnonymous и User.createFromData.

Код:

`example-8.html`

Преимущества использования фабричных методов:

* Лучшая читаемость кода. Как конструктора – вместо одной большой
функции несколько маленьких, так и вызывающего кода – явно видно,
что именно создаётся.
* Лучший контроль ошибок, т.к. если в createFromData ничего не
передали, то будет ошибка, а полиморфный конструктор создал бы
анонимного посетителя.
* Удобная расширяемость. Например, нужно добавить создание
администратора, без аргументов. Фабричный метод сделать легко:
User.createAdmin = function() { ... }. А для полиморфного
конструктора вызов без аргумента создаст анонима, так что нужно
добавить параметр – «тип посетителя» и усложнить этим код.

#### Поэтому полиморфные конструкторы лучше использовать там, где
#### нужен именно полиморфизм,

т.е. когда непонятно, какого типа аргумент передадут, и хочется в
одном конструкторе охватить все варианты.

А в остальных случаях отличная альтернатива – фабричные методы.

## Итого

Статические свойства и методы объекта удобно применять в
следующих случаях:

* Общие действия и подсчёты, имеющие отношения ко всем объектам
данного типа. В примерах выше это подсчёт количества.
* Методы, не привязанные к конкретному объекту, например сравнение.
* Вспомогательные методы, которые полезны вне объекта, например для
форматирования даты.
* Фабричные методы.
